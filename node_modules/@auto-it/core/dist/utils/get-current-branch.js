"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const env_ci_1 = tslib_1.__importDefault(require("env-ci"));
const child_process_1 = require("child_process");
const env = env_ci_1.default();
/** Get the current branch the git repo is set to */
function getCurrentBranch() {
    const isPR = "isPr" in env && env.isPr;
    let branch;
    // env-ci sets branch to target branch (ex: master) in some CI services.
    // so we should make sure we aren't in a PR just to be safe
    if (isPR && "prBranch" in env) {
        branch = env.prBranch;
    }
    else {
        branch = env.branch;
    }
    if (!branch) {
        try {
            branch = child_process_1.execSync("git symbolic-ref --short HEAD", {
                encoding: "utf8",
                stdio: "ignore",
            });
        }
        catch (error) { }
    }
    return branch;
}
exports.getCurrentBranch = getCurrentBranch;
//# sourceMappingURL=get-current-branch.js.map